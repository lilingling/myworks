/*! love-colors 2015-04-27 */
var WxBridge=function(a,b){function c(a,b){var c=a,e=b,f=["http://wx.wepiao.com","http://yx.wepiao.com","http://weixin.wepiao.com"];return-1==f.indexOf(window.location.origin)?void alert("您当前不在微信电影票的认证域名,不能使用分享功能"):void d(c,e)}function d(d,f){a.ajax({type:"get",async:!0,data:{url:window.location.href,force:d},url:"http://182.254.230.26:8080/CreateJsApiTicket.php",dataType:"jsonp",success:function(a){if(0==a.ret){var g=a.data;b.config({debug:f,appId:g.appId,timestamp:g.timestamp,nonceStr:g.nonceStr,signature:g.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),1==d&&e(share_param),b.error(function(a){"config:ok"!=a.errMsg&&(console.log("签名失效"),c(1,!1))})}},error:function(){1==d&&e(share_param)}})}function e(a){var c={title:a.title||"",link:a.link||"",imgUrl:a.imgUrl||"",desc:a.desc||"",type:a.type||"link",dataUrl:a.dataUrl||"",callback:a.callback||function(){}};b.ready(function(a){b.showOptionMenu({menuList:["menuItem:share:appMessage","menuItem:share:timeline"]}),b.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","hideMenuItems"],success:function(a){return(a.checkResult.onMenuShareTimeline=!1)||(a.checkResult.onMenuShareAppMessage=!1)?!1:void 0}}),b.onMenuShareTimeline({title:c.title,link:c.link,imgUrl:c.imgUrl,success:function(a){c.callback()},cancel:function(a){}}),b.onMenuShareAppMessage({title:c.title,desc:c.desc,link:c.link,imgUrl:c.imgUrl,type:c.type,dataUrl:c.dataUrl,success:function(a){c.callback()},cancel:function(a){}})})}return c(0,!1),{auth:c,share:e}}(Zepto,jWeixin);